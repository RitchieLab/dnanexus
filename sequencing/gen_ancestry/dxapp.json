{
  "name": "gen_ancestry",
  "title": "Determine Ancestry from PCA",
  "summary": "Determines ancestry from PCA eigenvector file using custom R script.",
  "tags": [
    "Statistics"
  ],
  "dxapi": "1.0.0",
  "version": "1.0.0",
  "inputSpec": [
    {
      "name": "pca_evec",
      "label": "PCA Eigenvector File",
      "help": "Input PCA eigenvector file as generated by the vcf_to_plink app.",
      "class": "file",
      "patterns": ["*.evec"],
      "optional": false
    },
    {
      "name": "ancestry_txt",
      "label": "Self-Reported Ancestry",
      "help": "Self-reported ancestry file. Must have two columns: ID and RACE. IDs must match those in the eigenvector file.",
      "class": "file",
      "optional": false
    },
    {
      "name": "prefix",
      "label": "Prefix for ancestry file",
      "help": "(Optional) Prefix for the output ancestry file. If not provided, will use the prefix of the eigenvector file.",
      "class": "string",
      "optional": true
    },
    {
      "name": "num_evec",
      "label": "Number of Eigenvectors",
      "help": "(Optional) Number of Eigenvectors for ancestry detection. Default 2.",
      "class": "int",
      "optional": true,
      "default": 2
    },
    {
      "name": "thresh",
      "label": "Posterior Probability Threshold",
      "help": "(Optional) Posterior probability threshold. Default 0.8.",
      "class": "float",
      "optional": true,
      "default": 0.8
    }
  ],
  "outputSpec": [
    {
      "name": "output_ancestry",
      "label": "Genetically Determined Ancestry",
      "class": "file"
    }
  ],
  "runSpec": {
    "file": "src/code.sh",
    "release": "14.04",
    "interpreter": "bash",
    "timeoutPolicy": {
      "main": {
        "hours": 24
      }
    },
    "distribution": "Ubuntu"
  },
  "regionalOptions": {
    "aws:us-east-1": {
      "assetDepends": [
          {   
          "project": "project-FGfj3Qj035bYpjzg9y3bvXFG",
          "folder": "/asset/",
          "id":"record-FJ3zf8j08zVZFzqYG88Pbk7z",
          "name": "marylyn_asset",
          "resources" : "project-FGqF5B00ByvPXG4G87yQy23G"
          }   
       ],
      "systemRequirements": {
        "*": { "instanceType": "mem1_ssd1_x4" }
      }
    },
    "azure:westus": {
      "assetDepends": [
        {
          "project": "project-FGp4k7j9k2Vy68736j2kBVPy",
          "folder": "/asset/",
          "id": "record-FJ4058j9Vf9ZBBVB2Q7b3VQz",
          "name": "marylyn_asset",
          "resources" : "project-FGvp3009BJq40pkZ683v3754"
        }
      ],
      "systemRequirements": {
        "*": { "instanceType": "azure:mem2_ssd1_x4" }
      }
    }
  },
  "openSource" : true,
  "details": {
    "upstreamVersion": "",
    "whatsNew": "* 1.0.0 First version of the Determine Ancestry from PCA app."
  }
}
